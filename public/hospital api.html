<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hospitals api</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>



<script>

// get users current position
getLocation()
  
        function getLocation(cordsSaved) {
            if ( cordsSaved === true) {
                localStorage.getItem (lat)
                localStorage.getItem (long)
            }
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(logPosition);

            } else {
                x.innerHTML = "Geolocation is not supported by this browser.";
            }
        }
// logs cooridantes and passes to fetch for api.
        function logPosition(position) {
            var lat = position.coords.latitude 
            var long = position.coords.longitude
            var cordsSaved = true
           localStorage.setItem("latitude", lat )
           localStorage.setItem("longitude", long)
           localStorage.setItem("cordsSaved", cordsSaved)
           console.log(localStorage)



    fetch(
        `https://api.foursquare.com/v2/venues/explore?client_id=P3NLBCAU42TU4OS2SATALIQNS0X3BVOGWEJMQDD5FNMUJ0EU&client_secret=LQDM0HB2OFTGVHOY0SNDHD4BL2X2TEI5XZC5YT0TYLLJ0LTE&v=20180323&limit=5&ll=${lat},${long}&query=Emergency`)
  .then(res => res.json())
  .then(data => fiveHospitals(data))
  .catch(function( err) {
      throw err
    // Code for handling errors
  })
}



         function fiveHospitals(data) {
    var array_hospitals = (data.response.groups[0].items)
    console.log(array_hospitals)
    for (var i = 0; i < 5; i++)  {
        var name = data.response.groups[0].items [i].venue.name
        var address = data.response.groups[0].items [i].venue.location.address
        $('.hospital').html('<li>' + name + '</li>')
        $('.address').html('<li>' + address + '</li>')
      
       
     }
}
;

    // $('.address').text(hospitals.venue.location.address)
    
// // hospitals.forEach(function (item, index) {
// //     console.log(item, index);
// })};


// var hospitalDiv = $("#hospitalDiv")
// var addressDiv = $("#addressDiv")
// function fiveHospitals(data) {
//     var array_hospitals = (data.response.groups[0].items)
//     console.log(array_hospitals)
    
//     for (var i = 0; i < 5; i++)  {
//          var newDiv = $("<div>")
//         var hospitalname = (data.response.groups[0].items [i].venue.name)
//         newDiv.text
//          $("#hospitalDiv").append(newDiv [0].innerText)
//          $("#addressDiv").append(newDiv [0])
//          }

//          for (var i = 0; i < 5; i++)  {
//          var newDiv = $("<div>")
//          newDiv.text(data.response.groups[0].items [i].venue.location.address)
//          $("#addressDiv").append(newDiv [0])
    </script>
</head>

<body>

    <div class="row">
        <div class="col-xl-6 col-md-6 mb-6">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <h4>Find nearby hospitals</h4>
                    <table class="table">
                        <thead>
                            <tr>
                             
                                <th scope="col">Hospital Name</th>
                                <th scope="col">address</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="hospital"></td>
                                <td class="address"></td>
                            </tr>
                            
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>



</body>

</html>